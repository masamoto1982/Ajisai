<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ajisai | Philosophy</title>
  <meta name="description" content="Ajisai design philosophy and core principles">
  <!-- 共通設定・テーマ（CSSより先に読み込み） -->
  <script src="../ajisai-config.js?v=20251230"></script>
  <script src="../ajisai-theme.js?v=20251230"></script>
  <style id="theme-vars"></style>
  <script>
    if (typeof AjisaiTheme !== 'undefined') {
      const vars = AjisaiTheme.getAll();
      let css = ':root {';
      for (const [key, value] of Object.entries(vars)) {
        css += `${key}: ${value};`;
      }
      css += '}';
      document.getElementById('theme-vars').textContent = css;
    }
  </script>
  <link href="../ajisai-base.css?v=20251230" media="screen" rel="stylesheet" />
  <link href="css/style.css?v=20251230" media="screen" rel="stylesheet" />
</head>
<body>
  <a href="#main-content" class="skip-link">Skip to main content</a>
  <div class="container">
    <header id="js-header" role="banner"></header>

    <main class="content-wrapper" role="main">
      <nav id="js-side-nav" class="side-nav"></nav>

      <article id="main-content" class="main-content">
        <h2>Design Philosophy</h2>

        <section>
          <h3>The Name "Ajisai"</h3>
          <p>The name "Ajisai" (紫陽花, hydrangea) metaphorically represents FORTH's characteristic of small words coming together to form functionality, like how small flowers form a hydrangea cluster.</p>
          <p><em>Note: What appears to be petals on a hydrangea are actually sepals.</em></p>
        </section>

        <section>
          <h3>Core Design Principles</h3>

          <h4>1. Stack-based Computation</h4>
          <p>Ajisai follows FORTH's stack-based paradigm with Reverse Polish Notation (RPN):</p>
          <ul>
            <li>Eliminates the need for parentheses to specify operation order</li>
            <li>Makes data flow explicit and visible</li>
            <li>Enables simple composition of operations</li>
          </ul>

          <h4>2. Vector-centric Data Model</h4>
          <p>All container data is represented as nestable Vectors (similar to LISP's list structure):</p>
          <ul>
            <li>Bracket <code>[ ]</code> nesting expresses dimensions</li>
            <li>Supports tensor-like operations (SHAPE, RESHAPE, TRANSPOSE)</li>
            <li>Allows heterogeneous data: <code>[ 1 'hello' TRUE [ 2 3 ] ]</code></li>
            <li>NumPy/APL-style broadcasting</li>
          </ul>

          <h4>3. Dimension Limit (Maximum 4D)</h4>
          <p>Based on human cognitive limits, Ajisai restricts dimensions to 4:</p>
          <table>
            <tr><th>Dim</th><th>Axes</th><th>Example</th></tr>
            <tr><td>1D</td><td>col</td><td><code>[ 1 2 3 ]</code></td></tr>
            <tr><td>2D</td><td>row, col</td><td><code>[ [ 1 2 ] [ 3 4 ] ]</code></td></tr>
            <tr><td>3D</td><td>layer, row, col</td><td><code>[ [ [ 1 2 ] ] ]</code></td></tr>
            <tr><td>4D</td><td>time, layer, row, col</td><td><code>[ [ [ [ 1 ] ] ] ]</code></td></tr>
          </table>

          <h4>4. Exact Fraction Arithmetic</h4>
          <p>All numbers are internally represented as fractions, eliminating rounding errors:</p>
          <ul>
            <li><code>5</code> stored as <code>Fraction(5, 1)</code></li>
            <li><code>0.5</code> stored as <code>Fraction(1, 2)</code></li>
            <li>Capable of handling extremely large numbers</li>
          </ul>

          <h4>5. "No Change is an Error" Principle</h4>
          <p>Operations that result in no change produce an error:</p>
          <ul>
            <li>Prevents silent no-ops that may hide bugs</li>
            <li>Examples: <code>[ 1 ] REVERSE</code>, <code>[ 1 2 3 ] SORT</code> (already sorted)</li>
          </ul>

          <h4>6. Built-in Word Protection</h4>
          <p>Built-in words cannot be deleted or overwritten, ensuring consistent behavior.</p>
        </section>

        <section>
          <h3>Influences</h3>
          <ul>
            <li><strong>FORTH:</strong> Stack-based computation, word definitions</li>
            <li><strong>LISP:</strong> Nested list structures</li>
            <li><strong>APL/J:</strong> Array operations, broadcasting</li>
            <li><strong>NumPy:</strong> Broadcasting rules, shape operations</li>
          </ul>
        </section>
      </article>
    </main>

    <footer id="js-footer"></footer>
  </div>
  <script src="script.js"></script>
</body>
</html>
