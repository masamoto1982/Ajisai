<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ajisai | Data Types</title>
  <meta name="description" content="Ajisai data types reference">
  <!-- 共通設定・テーマ（CSSより先に読み込み） -->
  <script src="../ajisai-config.js?v=20251230"></script>
  <script src="../ajisai-theme.js?v=20251230"></script>
  <style id="theme-vars"></style>
  <script>
    if (typeof AjisaiTheme !== 'undefined') {
      const vars = AjisaiTheme.getAll();
      let css = ':root {';
      for (const [key, value] of Object.entries(vars)) {
        css += `${key}: ${value};`;
      }
      css += '}';
      document.getElementById('theme-vars').textContent = css;
    }
  </script>
  <link href="css/style.css?v=20251230" media="screen" rel="stylesheet" />
</head>
<body>
  <div class="container">
    <header id="js-header" class="site-header"></header>
    <nav id="js-global-nav" class="global-nav"></nav>

    <main class="content-wrapper flexbox-a">
      <nav id="js-side-nav" class="side-nav"></nav>

      <article class="main-content">
        <h2>Data Types</h2>

        <section>
          <h3>Number</h3>
          <p>All numbers are internally fractions - no rounding errors:</p>
<pre><code># Integers
42
-17

# Decimals (auto-converted to fractions)
3.14       # Stored as 157/50
0.5        # Stored as 1/2

# Fractions
1/3
22/7

# Arithmetic
[ 1/3 ] [ 1/6 ] +    # Result: [ 1/2 ] (exact)</code></pre>

          <h4>Rounding Functions</h4>
<pre><code>[ 7/3 ] FLOOR    # Result: [ 2 ]
[ 7/3 ] CEIL     # Result: [ 3 ]
[ 5/2 ] ROUND    # Result: [ 3 ]</code></pre>
        </section>

        <section>
          <h3>String</h3>
<pre><code>'hello'
'日本語'          # UTF-8 supported

# Split into characters
[ 'hello' ] CHARS     # Result: [ 'h' 'e' 'l' 'l' 'o' ]

# Join characters
[ 'h' 'e' 'l' 'l' 'o' ] JOIN    # Result: [ 'hello' ]</code></pre>
        </section>

        <section>
          <h3>Boolean</h3>
<pre><code>TRUE
FALSE

# Comparisons
[ 3 ] [ 5 ] <      # Result: [ TRUE ]
[ 3 ] [ 3 ] =      # Result: [ TRUE ]

# Logic
[ TRUE ] [ FALSE ] AND    # Result: [ FALSE ]
[ TRUE ] [ FALSE ] OR     # Result: [ TRUE ]
[ TRUE ] NOT              # Result: [ FALSE ]</code></pre>
        </section>

        <section>
          <h3>Vector</h3>
          <p>Maximum 4 dimensions supported:</p>
          <table>
            <tr><th>Dim</th><th>Example</th></tr>
            <tr><td>1D</td><td><code>[ 1 2 3 ]</code></td></tr>
            <tr><td>2D</td><td><code>[ [ 1 2 ] [ 3 4 ] ]</code></td></tr>
            <tr><td>3D</td><td><code>[ [ [ 1 2 ] [ 3 4 ] ] ]</code></td></tr>
            <tr><td>4D</td><td><code>[ [ [ [ 1 ] ] ] ]</code></td></tr>
          </table>

          <h4>Shape Operations</h4>
<pre><code>[ [ 1 2 3 ] [ 4 5 6 ] ] SHAPE      # Result: [ 2 3 ]
[ [ 1 2 3 ] [ 4 5 6 ] ] RANK       # Result: [ 2 ]
[ 1 2 3 4 5 6 ] [ 2 3 ] RESHAPE    # Result: [ [ 1 2 3 ] [ 4 5 6 ] ]
[ [ 1 2 ] [ 3 4 ] ] TRANSPOSE      # Result: [ [ 1 3 ] [ 2 4 ] ]</code></pre>
        </section>

        <section>
          <h3>DateTime</h3>
<pre><code># Current time
NOW    # Result: [ @2024-11-25 14:00:00 ]

# Convert to components
NOW 'LOCAL' DATETIME    # Result: [ [ 2024 11 25 14 0 0 ] ]

# Create from components
[ [ 2024 12 25 0 0 0 ] ] 'LOCAL' TIMESTAMP</code></pre>
        </section>

        <section>
          <h3>Type Conversion</h3>
          <table>
            <tr><th>Word</th><th>Example</th></tr>
            <tr><td><code>STR</code></td><td><code>[ 42 ] STR</code> &rarr; <code>[ '42' ]</code></td></tr>
            <tr><td><code>NUM</code></td><td><code>[ '42' ] NUM</code> &rarr; <code>[ 42 ]</code></td></tr>
            <tr><td><code>BOOL</code></td><td><code>[ 1 ] BOOL</code> &rarr; <code>[ TRUE ]</code></td></tr>
            <tr><td><code>CHARS</code></td><td><code>[ 'abc' ] CHARS</code> &rarr; <code>[ 'a' 'b' 'c' ]</code></td></tr>
            <tr><td><code>JOIN</code></td><td><code>[ 'a' 'b' ] JOIN</code> &rarr; <code>[ 'ab' ]</code></td></tr>
          </table>
        </section>

        <section>
          <h3>Broadcasting</h3>
<pre><code># Scalar broadcast
[ 5 ] [ 1 2 3 ] +    # Result: [ 6 7 8 ]

# Row broadcast
[ [ 1 2 3 ] [ 4 5 6 ] ] [ 10 20 30 ] +
# Result: [ [ 11 22 33 ] [ 14 25 36 ] ]</code></pre>
        </section>
      </article>
    </main>

    <footer id="js-footer" class="site-footer"></footer>
  </div>
  <script src="script.js"></script>
</body>
</html>
