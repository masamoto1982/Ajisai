<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ajisai | Syntax</title>
  <meta name="description" content="Ajisai syntax reference">
  <!-- 共通設定・テーマ（CSSより先に読み込み） -->
  <script src="../ajisai-config.js?v=20251230"></script>
  <script src="../ajisai-theme.js?v=20251230"></script>
  <style id="theme-vars"></style>
  <script>
    if (typeof AjisaiTheme !== 'undefined') {
      const vars = AjisaiTheme.getAll();
      let css = ':root {';
      for (const [key, value] of Object.entries(vars)) {
        css += `${key}: ${value};`;
      }
      css += '}';
      document.getElementById('theme-vars').textContent = css;
    }
  </script>
  <link href="../ajisai-base.css?v=20251230" media="screen" rel="stylesheet" />
  <link href="css/style.css?v=20251230" media="screen" rel="stylesheet" />
</head>
<body>
  <a href="#main-content" class="skip-link">Skip to main content</a>
  <div class="container">
    <header id="js-header" role="banner"></header>

    <main class="content-wrapper" role="main">
      <nav id="js-side-nav" class="side-nav"></nav>

      <article id="main-content" class="main-content">
        <h2>Syntax</h2>

        <section>
          <h3>Reverse Polish Notation</h3>
          <p>Ajisai uses RPN (postfix notation). Operators follow operands:</p>
<pre><code># Traditional: (1 + 2) * 3
# Ajisai:
[ 1 ] [ 2 ] + [ 3 ] *    # Result: [ 9 ]</code></pre>
        </section>

        <section>
          <h3>Basic Elements</h3>

          <h4>Comments</h4>
<pre><code># This is a comment
[ 1 2 3 ]  # Inline comment</code></pre>

          <h4>Numbers</h4>
<pre><code>42        # Integer
3.14      # Decimal (stored as fraction)
1/3       # Fraction
-5        # Negative
1.5e2     # Scientific notation</code></pre>

          <h4>Strings</h4>
<pre><code>'hello'
'日本語'    # UTF-8 supported</code></pre>

          <h4>Booleans &amp; Nil</h4>
<pre><code>TRUE
FALSE
nil</code></pre>
        </section>

        <section>
          <h3>Vectors</h3>
<pre><code># 1D Vector
[ 1 2 3 ]

# 2D Nested Vector
[ [ 1 2 ] [ 3 4 ] ]

# Mixed types
[ 1 'hello' TRUE [ 2 3 ] ]

# All brackets equivalent
[ 1 2 3 ]
{ 1 2 3 }
( 1 2 3 )</code></pre>
        </section>

        <section>
          <h3>Defining Words</h3>
<pre><code># Define a word
[ '[ 2 ] *' ] 'DOUBLE' DEF

# Use it
[ 5 ] DOUBLE    # Result: [ 10 ]

# Check if even
[ '[ 2 ] MOD [ 0 ] =' ] 'EVEN?' DEF
[ 4 ] EVEN?     # Result: [ TRUE ]</code></pre>
        </section>

        <section>
          <h3>Operation Targets</h3>
          <h4>Stack Top Mode (default)</h4>
<pre><code>[ 1 2 3 ] LENGTH    # Operates on top element</code></pre>

          <h4>Stack Mode (..)</h4>
<pre><code>a b c .. LENGTH     # Operates on entire stack
a b c .. REVERSE    # Result: c b a</code></pre>
        </section>

        <section>
          <h3>Guards (Conditionals)</h3>
<pre><code># Syntax: condition : action : condition : action : default

[
  '[ 0 ] <' : '[ -1 ]' :
  '[ 0 ] >' : '[ 1 ]' :
  '[ 0 ]'
] 'SIGN' DEF

[ -5 ] SIGN    # Result: [ -1 ]</code></pre>
        </section>

        <section>
          <h3>Input Helpers</h3>
          <table>
            <tr><th>Helper</th><th>Result</th></tr>
            <tr><td><code>SCALAR</code></td><td><code>[ ]</code></td></tr>
            <tr><td><code>VECTOR</code></td><td><code>[ [ ] ]</code></td></tr>
            <tr><td><code>MATRIX</code></td><td><code>[ [ [ ] ] ]</code></td></tr>
            <tr><td><code>TENSOR</code></td><td><code>[ [ [ [ ] ] ] ]</code></td></tr>
          </table>
        </section>
      </article>
    </main>

    <footer id="js-footer"></footer>
  </div>
  <script src="script.js"></script>
</body>
</html>
