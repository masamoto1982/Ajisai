<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ajisai | Control Flow</title>
  <meta name="description" content="Ajisai control flow reference">
  <link href="css/style.css" media="screen" rel="stylesheet" />
</head>
<body>
  <div class="container">
    <header id="js-header" class="site-header"></header>
    <nav id="js-global-nav" class="global-nav"></nav>

    <main class="content-wrapper flexbox-a">
      <nav id="js-side-nav" class="side-nav"></nav>

      <article class="main-content">
        <h2>Control Flow</h2>

        <section>
          <h3>Guards (Conditional Branching)</h3>
          <p>Guards use <code>:</code> to create conditionals:</p>
<pre><code>condition1 : action1 : condition2 : action2 : default</code></pre>

          <h4>Example: Sign Classification</h4>
<pre><code>[
  '[ 0 ] <' : '[ -1 ]' :
  '[ 0 ] >' : '[ 1 ]' :
  '[ 0 ]'
] 'SIGN' DEF

[ -5 ] SIGN    # Result: [ -1 ]
[ 10 ] SIGN    # Result: [ 1 ]
[ 0 ] SIGN     # Result: [ 0 ]</code></pre>

          <h4>Example: Absolute Value</h4>
<pre><code>[
  '[ 0 ] <' : '[ -1 ] *' :
  ''
] 'ABS' DEF

[ -5 ] ABS    # Result: [ 5 ]
[ 3 ] ABS     # Result: [ 3 ]</code></pre>
        </section>

        <section>
          <h3>TIMES - Repetition</h3>
<pre><code>'word_name' [ count ] TIMES</code></pre>

          <h4>Examples</h4>
<pre><code># Double 3 times (multiply by 8)
[ '[ 2 ] *' ] 'DOUBLE' DEF
[ 5 ] 'DOUBLE' [ 3 ] TIMES    # Result: [ 40 ]

# Build a sequence
[ '[ 1 ] CONCAT' ] 'ADD_ONE' DEF
[ ] 'ADD_ONE' [ 5 ] TIMES     # Result: [ 1 1 1 1 1 ]</code></pre>
        </section>

        <section>
          <h3>WAIT - Delayed Execution</h3>
<pre><code>'word_name' [ milliseconds ] WAIT</code></pre>

          <h4>Examples</h4>
<pre><code># Execute after 1 second
[ '[ 'Done!' ] PRINT' ] 'NOTIFY' DEF
'NOTIFY' [ 1000 ] WAIT</code></pre>

          <p>Use cases:</p>
          <ul>
            <li>Animation and visual effects</li>
            <li>Debouncing user input</li>
            <li>Scheduled operations</li>
          </ul>
        </section>

        <section>
          <h3>Force Execution (!)</h3>
          <p>Allows DEL/DEF of dependent words:</p>
<pre><code># Define dependent words
[ 'HELPER' ] 'MAIN' DEF
[ '[ 1 ]' ] 'HELPER' DEF

# Cannot delete HELPER normally
'HELPER' DEL    # Error!

# Force delete
! 'HELPER' DEL  # Success</code></pre>
        </section>

        <section>
          <h3>Recursion</h3>
          <p>Recursive patterns via word definitions:</p>

          <h4>Factorial</h4>
<pre><code>[
  '[ 1 ] <=' : '[ 1 ]' :
  '[ 1 ] - FACTORIAL *'
] 'FACTORIAL' DEF

[ 5 ] FACTORIAL    # Result: [ 120 ]</code></pre>

          <p><strong>Note:</strong> For large iterations, prefer FOLD:</p>
<pre><code># 5! using FOLD (no recursion)
[ 1 ] [ 5 ] RANGE [ 1 ] '*' FOLD    # Result: [ 120 ]</code></pre>
        </section>

        <section>
          <h3>Best Practices</h3>
          <ul>
            <li><strong>Prefer higher-order functions</strong> over explicit loops</li>
            <li><strong>Keep guard conditions simple</strong> and readable</li>
            <li><strong>Name complex predicates</strong> for clarity</li>
            <li><strong>Avoid deep recursion</strong> - use FOLD for large data</li>
          </ul>
        </section>
      </article>
    </main>

    <footer id="js-footer" class="site-footer"></footer>
  </div>
  <script src="../ajisai-theme.js"></script>
  <script src="config.js"></script>
  <script src="script.js"></script>
</body>
</html>
