<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ajisai | Built-in Words</title>
  <meta name="description" content="Ajisai built-in words reference">
  <script src="../ajisai-config.js?v=20251230"></script>
  <script src="../ajisai-theme.js?v=20251230"></script>
  <style id="theme-vars"></style>
  <script>
    if (typeof AjisaiTheme !== 'undefined') {
      const vars = AjisaiTheme.getAll();
      let css = ':root {';
      for (const [key, value] of Object.entries(vars)) {
        css += `${key}: ${value};`;
      }
      css += '}';
      document.getElementById('theme-vars').textContent = css;
    }
  </script>
  <link href="../ajisai-base.css?v=20251230" media="screen" rel="stylesheet" />
  <link href="css/style.css?v=20251230" media="screen" rel="stylesheet" />
</head>
<body>
  <a href="#main-content" class="skip-link">Skip to main content</a>
  <div class="container">
    <header id="js-header" role="banner"></header>

    <main class="content-wrapper" role="main">
      <nav id="js-side-nav" class="side-nav"></nav>

      <article id="main-content" class="main-content">
        <h2>Built-in Words</h2>

        <section>
          <h3>Quick Reference</h3>
          <p>
            <code>!</code>
            <code>'</code>
            <code>*</code>
            <code>+</code>
            <code>,</code>
            <code>,,</code>
            <code>-</code>
            <code>.</code>
            <code>..</code>
            <code>/</code>
            <code>:</code>
            <code>;</code>
            <code>&lt;</code>
            <code>&lt;=</code>
            <code>=</code>
            <code>==</code>
            <code>=&gt;</code>
            <code>&gt;&gt;</code>
            <code>&gt;&gt;&gt;</code>
            <code>?</code>
          </p>
          <p>
            <code>ADSR</code>
            <code>AND</code>
            <code>BOOL</code>
            <code>CEIL</code>
            <code>CHARS</code>
            <code>CHORD</code>
            <code>CHR</code>
            <code>COLLECT</code>
            <code>CONCAT</code>
            <code>CSPRNG</code>
            <code>DATETIME</code>
            <code>DEF</code>
            <code>DEL</code>
            <code>EVAL</code>
            <code>EXEC</code>
            <code>FALSE</code>
            <code>FILL</code>
            <code>FILTER</code>
            <code>FLOOR</code>
            <code>FOLD</code>
            <code>FRAME</code>
            <code>FX-RESET</code>
            <code>GAIN</code>
            <code>GAIN-RESET</code>
            <code>GET</code>
            <code>HASH</code>
            <code>INSERT</code>
            <code>JOIN</code>
            <code>LENGTH</code>
            <code>MAP</code>
            <code>MOD</code>
            <code>NIL</code>
            <code>NOT</code>
            <code>NOW</code>
            <code>NUM</code>
            <code>OR</code>
            <code>PAN</code>
            <code>PAN-RESET</code>
            <code>PLAY</code>
            <code>PRINT</code>
            <code>RANGE</code>
            <code>RANK</code>
            <code>REMOVE</code>
            <code>REORDER</code>
            <code>REPLACE</code>
            <code>RESHAPE</code>
            <code>REVERSE</code>
            <code>ROUND</code>
            <code>SAW</code>
            <code>SEQ</code>
            <code>SHAPE</code>
            <code>SIM</code>
            <code>SINE</code>
            <code>SLOT</code>
            <code>SORT</code>
            <code>SPLIT</code>
            <code>SQUARE</code>
            <code>STR</code>
            <code>TAKE</code>
            <code>TIMES</code>
            <code>TIMESTAMP</code>
            <code>TRANSPOSE</code>
            <code>TRI</code>
            <code>TRUE</code>
            <code>WAIT</code>
          </p>
        </section>

        <section>
          <h3>Target Specification</h3>
          <div class="word-item">
            <h4>.</h4>
            <p>Stack top mode (default). Operations affect only the top element.</p>
            <div class="word-example"><code>[ 1 2 3 ] LENGTH    # Operates on top element</code></div>
          </div>
          <div class="word-item">
            <h4>..</h4>
            <p>Stack mode - operates on entire stack</p>
            <div class="word-example"><code>a b c .. REVERSE    # Result: c b a</code></div>
          </div>
        </section>

        <section>
          <h3>Consumption Mode</h3>
          <div class="word-item">
            <h4>,</h4>
            <p>Consume mode (default). Operands are removed from stack after operation.</p>
            <div class="word-example"><code>[ 1 ] [ 2 ] , +    # Result: [ 3 ] (same as default)</code></div>
          </div>
          <div class="word-item">
            <h4>,,</h4>
            <p>Keep mode - operands remain on stack, result is added</p>
            <div class="word-example"><code>[ 1 ] [ 2 ] ,, +    # Result: [ 1 ] [ 2 ] [ 3 ]
[ 3 ] [ 4 ] ,, *    # Result: [ 3 ] [ 4 ] [ 12 ]</code></div>
          </div>
          <p class="note">Modifiers are order-independent: <code>,, ..</code> and <code>.. ,,</code> produce the same result.</p>
        </section>

        <section>
          <h3>Input Helpers</h3>
          <div class="word-item">
            <h4>'</h4>
            <p>Single quote - starts a string literal</p>
            <div class="word-example"><code>'hello'    # String value</code></div>
          </div>
          <div class="word-item">
            <h4>FRAME</h4>
            <p>Create bracket structure with specified shape</p>
            <div class="word-example"><code>[ 2 3 ] FRAME    # Creates a 2x3 frame structure</code></div>
          </div>
        </section>

        <section>
          <h3>Position Operations (0-indexed)</h3>
          <div class="word-item">
            <h4>GET</h4>
            <p>Get element at position. Negative index counts from end.</p>
            <div class="word-example"><code>[ 10 20 30 ] [ 0 ] GET    # Result: [ 10 ]
[ 10 20 30 ] [ -1 ] GET   # Result: [ 30 ]</code></div>
          </div>
          <div class="word-item">
            <h4>INSERT</h4>
            <p>Insert element at position</p>
            <div class="word-example"><code>[ 1 3 ] [ 1 2 ] INSERT    # Result: [ 1 2 3 ]</code></div>
          </div>
          <div class="word-item">
            <h4>REPLACE</h4>
            <p>Replace element at position</p>
            <div class="word-example"><code>[ 1 2 3 ] [ 0 9 ] REPLACE    # Result: [ 9 2 3 ]</code></div>
          </div>
          <div class="word-item">
            <h4>REMOVE</h4>
            <p>Remove element at position</p>
            <div class="word-example"><code>[ 1 2 3 ] [ 1 ] REMOVE    # Result: [ 1 3 ]</code></div>
          </div>
        </section>

        <section>
          <h3>Quantity Operations</h3>
          <div class="word-item">
            <h4>LENGTH</h4>
            <p>Get element count</p>
            <div class="word-example"><code>[ 1 2 3 4 5 ] LENGTH    # Result: [ 5 ]</code></div>
          </div>
          <div class="word-item">
            <h4>TAKE</h4>
            <p>Take N elements from start (positive) or end (negative)</p>
            <div class="word-example"><code>[ 1 2 3 4 5 ] [ 3 ] TAKE     # Result: [ 1 2 3 ]
[ 1 2 3 4 5 ] [ -2 ] TAKE    # Result: [ 4 5 ]</code></div>
          </div>
        </section>

        <section>
          <h3>Vector Operations</h3>
          <div class="word-item">
            <h4>SPLIT</h4>
            <p>Split vector at specified sizes</p>
            <div class="word-example"><code>[ 1 2 3 4 5 6 ] [ 2 3 ] SPLIT    # Result: [ 1 2 ] [ 3 4 5 ] [ 6 ]</code></div>
          </div>
          <div class="word-item">
            <h4>CONCAT</h4>
            <p>Concatenate vectors</p>
            <div class="word-example"><code>[ a ] [ b ] CONCAT    # Result: [ a b ]</code></div>
          </div>
          <div class="word-item">
            <h4>REVERSE</h4>
            <p>Reverse order</p>
            <div class="word-example"><code>[ 1 2 3 ] REVERSE    # Result: [ 3 2 1 ]</code></div>
          </div>
          <div class="word-item">
            <h4>RANGE</h4>
            <p>Generate inclusive range</p>
            <div class="word-example"><code>[ 0 5 ] RANGE    # Result: [ 0 1 2 3 4 5 ]</code></div>
          </div>
          <div class="word-item">
            <h4>SORT</h4>
            <p>Sort ascending</p>
            <div class="word-example"><code>[ 3 1 4 1 5 ] SORT    # Result: [ 1 1 3 4 5 ]</code></div>
          </div>
        </section>

        <section>
          <h3>Constants</h3>
          <div class="word-item">
            <h4>TRUE FALSE NIL</h4>
            <p>Boolean and null constants</p>
            <div class="word-example"><code>TRUE     # Pushes TRUE
FALSE    # Pushes FALSE
NIL      # Pushes NIL (empty value)</code></div>
          </div>
        </section>

        <section>
          <h3>String Operations</h3>
          <div class="word-item">
            <h4>CHARS</h4>
            <p>Split string into character vector</p>
            <div class="word-example"><code>'hello' CHARS    # Result: [ 'h' 'e' 'l' 'l' 'o' ]</code></div>
          </div>
          <div class="word-item">
            <h4>JOIN</h4>
            <p>Join character vector into string</p>
            <div class="word-example"><code>[ 'h' 'e' 'l' 'l' 'o' ] JOIN    # Result: 'hello'</code></div>
          </div>
        </section>

        <section>
          <h3>Parse/Convert</h3>
          <div class="word-item">
            <h4>NUM</h4>
            <p>Parse string to number (returns NIL on failure)</p>
            <div class="word-example"><code>'123' NUM    # Result: [ 123 ]
'abc' NUM    # Result: NIL</code></div>
          </div>
          <div class="word-item">
            <h4>STR</h4>
            <p>Convert value to string</p>
            <div class="word-example"><code>[ 123 ] STR    # Result: '123'</code></div>
          </div>
          <div class="word-item">
            <h4>BOOL</h4>
            <p>Normalize to boolean</p>
            <div class="word-example"><code>'true' BOOL    # Result: TRUE
[ 100 ] BOOL   # Result: TRUE</code></div>
          </div>
          <div class="word-item">
            <h4>CHR</h4>
            <p>Convert number to Unicode character</p>
            <div class="word-example"><code>[ 65 ] CHR    # Result: 'A'</code></div>
          </div>
        </section>

        <section>
          <h3>DateTime</h3>
          <div class="word-item">
            <h4>NOW</h4>
            <p>Get current Unix timestamp</p>
            <div class="word-example"><code>NOW    # Result: [ 1732531200 ]</code></div>
          </div>
          <div class="word-item">
            <h4>DATETIME</h4>
            <p>Convert timestamp to datetime vector</p>
            <div class="word-example"><code>[ 1732531200 ] 'LOCAL' DATETIME    # Result: [ 2024 11 25 23 0 0 ]</code></div>
          </div>
          <div class="word-item">
            <h4>TIMESTAMP</h4>
            <p>Convert datetime vector to timestamp</p>
            <div class="word-example"><code>[ 2024 11 25 23 0 0 ] 'LOCAL' TIMESTAMP    # Result: [ 1732531200 ]</code></div>
          </div>
        </section>

        <section>
          <h3>Arithmetic</h3>
          <div class="word-item">
            <h4>+ - * /</h4>
            <p>Element-wise operations with broadcasting</p>
            <div class="word-example"><code>[ 1 2 3 ] [ 10 ] +    # Result: [ 11 12 13 ]
[ 1 2 3 ] [ 4 5 6 ] *    # Result: [ 4 10 18 ]</code></div>
          </div>
          <div class="word-item">
            <h4>MOD</h4>
            <p>Modulo operation</p>
            <div class="word-example"><code>[ 7 ] [ 3 ] MOD    # Result: [ 1 ]</code></div>
          </div>
          <div class="word-item">
            <h4>FLOOR CEIL ROUND</h4>
            <p>Rounding operations</p>
            <div class="word-example"><code>[ 7/3 ] FLOOR    # Result: [ 2 ]
[ 7/3 ] CEIL     # Result: [ 3 ]
[ 5/2 ] ROUND    # Result: [ 3 ]</code></div>
          </div>
        </section>

        <section>
          <h3>Comparison</h3>
          <div class="word-item">
            <h4>= &lt; &lt;=</h4>
            <p>Comparison operators (equality, less than, less than or equal)</p>
            <div class="word-example"><code>[ 1 2 ] [ 1 2 ] =    # Result: TRUE
[ 1 ] [ 2 ] <        # Result: TRUE
[ 2 ] [ 2 ] <=       # Result: TRUE</code></div>
          </div>
        </section>

        <section>
          <h3>Logic</h3>
          <div class="word-item">
            <h4>AND OR NOT</h4>
            <p>Logical operations (supports three-valued logic with NIL)</p>
            <div class="word-example"><code>TRUE FALSE AND    # Result: FALSE
TRUE FALSE OR     # Result: TRUE
TRUE NOT          # Result: FALSE</code></div>
          </div>
        </section>

        <section>
          <h3>Higher-Order Functions</h3>
          <div class="word-item">
            <h4>MAP</h4>
            <p>Apply word to each element</p>
            <div class="word-example"><code>[ 1 2 3 ] 'DOUBLE' MAP    # Result: [ 2 4 6 ]</code></div>
          </div>
          <div class="word-item">
            <h4>FILTER</h4>
            <p>Keep matching elements</p>
            <div class="word-example"><code>[ 1 2 3 4 ] 'EVEN?' FILTER    # Result: [ 2 4 ]</code></div>
          </div>
          <div class="word-item">
            <h4>FOLD</h4>
            <p>Reduce with initial value</p>
            <div class="word-example"><code>[ 1 2 3 4 ] [ 0 ] '+' FOLD    # Result: [ 10 ]</code></div>
          </div>
        </section>

        <section>
          <h3>I/O</h3>
          <div class="word-item">
            <h4>PRINT</h4>
            <p>Print and pop stack top</p>
            <div class="word-example"><code>[ 42 ] PRINT    # Outputs: 42</code></div>
          </div>
        </section>

        <section>
          <h3>Music</h3>
          <div class="word-item">
            <h4>SEQ</h4>
            <p>Set sequential playback mode</p>
            <div class="word-example"><code>[ 440 550 660 ] SEQ PLAY    # Play 3 notes sequentially</code></div>
          </div>
          <div class="word-item">
            <h4>SIM</h4>
            <p>Set simultaneous playback mode (chord)</p>
            <div class="word-example"><code>[ 440 550 660 ] SIM PLAY    # Play 3 notes as chord</code></div>
          </div>
          <div class="word-item">
            <h4>SLOT</h4>
            <p>Set slot duration in seconds</p>
            <div class="word-example"><code>0.25 SLOT    # 1 slot = 0.25 seconds
1/4 SLOT     # Fraction also works (same as above)</code></div>
          </div>
          <div class="word-item">
            <h4>GAIN</h4>
            <p>Set volume level (0.0-1.0)</p>
            <div class="word-example"><code>0.5 GAIN    # 50% volume</code></div>
          </div>
          <div class="word-item">
            <h4>GAIN-RESET</h4>
            <p>Reset volume to default (100%)</p>
            <div class="word-example"><code>GAIN-RESET</code></div>
          </div>
          <div class="word-item">
            <h4>PAN</h4>
            <p>Set stereo position (-1.0 left to 1.0 right)</p>
            <div class="word-example"><code>-0.5 PAN    # slightly left</code></div>
          </div>
          <div class="word-item">
            <h4>PAN-RESET</h4>
            <p>Reset pan to center</p>
            <div class="word-example"><code>PAN-RESET</code></div>
          </div>
          <div class="word-item">
            <h4>FX-RESET</h4>
            <p>Reset all audio effects</p>
            <div class="word-example"><code>FX-RESET    # gain=1.0, pan=0.0</code></div>
          </div>
          <div class="word-item">
            <h4>PLAY</h4>
            <p>Play audio</p>
            <div class="word-example"><code>[ 440 ] PLAY    # Play 440Hz tone</code></div>
          </div>
        </section>

        <section>
          <h3>Word Management</h3>
          <div class="word-item">
            <h4>DEF</h4>
            <p>Define custom word using code block syntax <code>: ... ;</code></p>
            <div class="word-example"><code>: [ 2 ] * ; 'DOUBLE' DEF</code></div>
          </div>
          <div class="word-item">
            <h4>DEL</h4>
            <p>Delete custom word</p>
            <div class="word-example"><code>'DOUBLE' DEL</code></div>
          </div>
          <div class="word-item">
            <h4>?</h4>
            <p>Show word definition</p>
            <div class="word-example"><code>'DOUBLE' ?</code></div>
          </div>
        </section>

        <section>
          <h3>Control Flow</h3>
          <div class="word-item">
            <h4>&gt;&gt; (Chevron Branch)</h4>
            <p>Guard separator for conditional branching (condition-action pairs)</p>
            <div class="word-example"><code>>> condition >> action >> condition >> action</code></div>
          </div>
          <div class="word-item">
            <h4>&gt;&gt;&gt; (Chevron Default)</h4>
            <p>Default branch in guard expressions</p>
            <div class="word-example"><code>>> [ 0 ] < >> [ -1 ] >>> [ 1 ]</code></div>
          </div>
          <div class="word-item">
            <h4>TIMES</h4>
            <p>Execute code block or word N times</p>
            <div class="word-example"><code>: [ 2 ] * ; [ 3 ] TIMES    # Code block 3 times
'DOUBLE' [ 3 ] TIMES       # Word name 3 times</code></div>
          </div>
          <div class="word-item">
            <h4>== (Pipeline)</h4>
            <p>Visual data flow marker (no-op)</p>
            <div class="word-example"><code>[ 1 2 3 ] == : [ 2 ] * ; MAP    # Readable pipeline</code></div>
          </div>
          <div class="word-item">
            <h4>=&gt; (Nil Coalescing)</h4>
            <p>Return alternative value when NIL</p>
            <div class="word-example"><code>NIL =&gt; [ 0 ]       # Result: [ 0 ]
[ 42 ] =&gt; [ 0 ]    # Result: [ 42 ]</code></div>
          </div>
          <div class="word-item">
            <h4>WAIT</h4>
            <p>Execute after delay (milliseconds)</p>
            <div class="word-example"><code>'PROCESS' [ 1000 ] WAIT    # Execute PROCESS after 1 second</code></div>
          </div>
          <div class="word-item">
            <h4>!</h4>
            <p>Force flag - allows DEL/DEF of dependent words</p>
            <div class="word-example"><code>! 'WORD' DEL    # Force delete</code></div>
          </div>
        </section>

        <section>
          <h3>Random</h3>
          <div class="word-item">
            <h4>CSPRNG</h4>
            <p>Cryptographically secure random number generation</p>
            <div class="word-example"><code>[ 6 ] [ 1 ] CSPRNG    # Result: random [0, 5/6]
[ 5 ] CSPRNG          # Generate 5 random numbers</code></div>
          </div>
        </section>

        <section>
          <h3>Hash</h3>
          <div class="word-item">
            <h4>HASH</h4>
            <p>Deterministic hash of any value</p>
            <div class="word-example"><code>'hello' HASH           # Result: [ 0.xxx ]
[ 128 ] 'hello' HASH   # 128-bit hash output</code></div>
          </div>
        </section>
      </article>
    </main>

    <footer id="js-footer"></footer>
  </div>
  <script src="script.js"></script>
</body>
</html>
