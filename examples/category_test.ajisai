# 圏論ワードのテスト

# === 基本テスト ===

# 恒等射
[ 3 ] ID
# 期待: [ [ 1 0 0 ] [ 0 1 0 ] [ 0 0 1 ] ]

# 射の合成
[ [ 1 2 ] [ 3 4 ] ]    # f: R² → R²
[ [ 1 0 ] [ 0 1 ] ]    # g: R² → R² (恒等)
COMPOSE
# 期待: [ [ 1 2 ] [ 3 4 ] ]

# テンソル積
[ [ 1 0 ] [ 0 1 ] ]    # I_2
[ [ 1 0 ] [ 0 1 ] ]    # I_2
KRON
# 期待: 4×4 単位行列

# 外積
[ 1 2 3 ]
[ 4 5 ]
OUTER
# 期待: [ [ 4 5 ] [ 8 10 ] [ 12 15 ] ]

# トレース（縮約）
[ [ 1 2 ] [ 3 4 ] ]
[ [ 0 1 ] ] CONTRACT
# 期待: [ 5 ] (1 + 4)

# DOM / COD
[ [ 1 2 3 ] [ 4 5 6 ] ]  # 2×3 行列
DOM  # → [ 3 ]
COD  # → [ 2 ]

# === 圏論の法則 ===

# 恒等律: id ∘ f = f
[ [ 1 2 ] [ 3 4 ] ]  # f
DUP
[ 2 ] ID             # id_2
COMPOSE
# =                    # f = id ∘ f ?
# 期待: true

# === 実用例 ===

# ニューラルネットワーク層の合成
# Layer1: R³ → R²
[ [ 1 2 3 ] [ 4 5 6 ] ]

# Layer2: R² → R²
[ [ 0.5 0.5 ] [ 0.5 0.5 ] ]

# 合成: Layer2 ∘ Layer1 = R³ → R²
COMPOSE
# 結果: 2×3 行列

# === Unicode記法のテスト ===

# ∘ (合成記号)
[ [ 1 0 ] [ 0 1 ] ]
[ [ 2 0 ] [ 0 2 ] ]
∘
# 期待: [ [ 2 0 ] [ 0 2 ] ]

# ⊗ (テンソル積記号)
[ [ 1 0 ] [ 0 1 ] ]
[ [ 1 0 ] [ 0 1 ] ]
⊗
# 期待: 4×4 単位行列
